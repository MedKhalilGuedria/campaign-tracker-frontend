<h4>
  <i class="fas fa-trophy me-2"></i>
  Betting History
  <span class="badge bg-warning ms-2">{{ bets.length }}</span>
</h4>

<div *ngIf="bets.length === 0" class="alert alert-info">
  <i class="fas fa-info-circle me-2"></i>
  No bets placed yet. Place your first bet using the form above.
</div>

<div *ngIf="bets.length > 0" class="table-responsive">
  <table class="table table-hover">
    <thead class="table-light">
      <tr>
        <th>Sport</th>
        <th>Stake</th>
        <th>Odds</th>
        <th>Potential Win</th>
        <th>Result</th>
        <th>Profit/Loss</th>
        <th>Date</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let bet of bets">
        <td>
          <i class="fas fa-futbol me-1 text-muted"></i>
          {{ bet.sport }}
        </td>
        <td>
          <strong>{{ bet.stake | currencyFormat }}</strong>
        </td>
        <td>
          <span class="badge bg-secondary">{{ bet.odds }}</span>
        </td>
        <td>
          <span class="text-success">
            {{ (bet.stake * bet.odds) | currencyFormat }}
          </span>
        </td>
        <td>
          <span class="badge" 
                [ngClass]="{
                  'bg-success': bet.result === 'win',
                  'bg-danger': bet.result === 'loss',
                  'bg-warning': bet.result === 'pending'
                }">
            {{ bet.result | titlecase }}
          </span>
        </td>
        <td>
          <span [ngClass]="{
            'text-success': bet.profit_loss > 0,
            'text-danger': bet.profit_loss < 0,
            'text-muted': bet.profit_loss === 0
          }">
            {{ bet.profit_loss | currencyFormat }}
          </span>
        </td>
        <td>
          <small class="text-muted">
            {{ bet.created_at | date:'short' }}
          </small>
        </td>
        <td>
          <app-bet-result 
            [bet]="bet"
            (resultUpdated)="onResultUpdated($event)">
          </app-bet-result>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Stats Summary -->
<div class="row mt-4" *ngIf="bets.length > 0">
  <div class="col-md-4">
    <div class="card">
      <div class="card-body text-center">
        <h5 class="card-title text-success">
          {{ getWinCount() }}
        </h5>
        <p class="card-text text-muted">Wins</p>
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card">
      <div class="card-body text-center">
        <h5 class="card-title text-danger">
          {{ getLossCount() }}
        </h5>
        <p class="card-text text-muted">Losses</p>
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card">
      <div class="card-body text-center">
        <h5 class="card-title text-warning">
          {{ getPendingCount() }}
        </h5>
        <p class="card-text text-muted">Pending</p>
      </div>
    </div>
  </div>
</div>